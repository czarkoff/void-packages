# Template file for 're'
pkgname="re"
version="0.5.0"
revision=1
build_style=gnu-makefile
makedepends="libressl-devel"
short_desc="Portable library for real-time communications"
maintainer="Dmitrij D. Czarkoff <czarkoff@gmail.com>"
license="BSD"
homepage="http://www.creytiv.com/"
distfiles="http://www.creytiv.com/pub/re-${version}.tar.gz"
checksum="a2dd2204351b96b9af8a61680bfaa76231f5b47930080ec0af5eeba04a6cbaa2"

shlib_provides="libre.so"

do_build() {
	: ${make_cmd:=make}

	CC="$CC" CXX="$CXX" LD="$LD" AR="$AR" RANLIB="$RANLIB" \
	CPP="$CPP" AS="$AS" OBJDUMP="$OBJDUMP" CFLAGS="$CFLAGS" \
	LFLAGS="$LDFLAGS" \
	${make_cmd} \
	${makejobs} PREFIX=/usr ${make_build_args} ${make_build_target}
}

do_install() {
	: ${make_cmd:=make}
	: ${make_install_target:=install}

	${make_cmd} STRIP=true PREFIX=/usr DESTDIR=${DESTDIR} \
		${make_install_args} ${make_install_target}
	vlicense docs/COPYING
}

re-devel_package() {
	short_desc+=" - development files"
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/*.a
		vmove usr/lib/pkgconfig
		vmove usr/share/re/re.mk
	}
}
